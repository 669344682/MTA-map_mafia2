local object = {
{'OB_Others_03', { {1, 0, 0, 0}, {0, 1, 0, 0}, {0, 0, 1, 0}, {340.462341308594, -496.938781738281, -24.2695446014404, 0} }, 0},
{'OB_Others_02', { {1, 0, 0, 0}, {0, 1, 0, 0}, {0, 0, 1, 0}, {554.221374511719, -451.789398193359, -19.2867565155029, 0} }, 0},
{'OB_Others_00', { {1, 0, 0, 0}, {0, 1, 0, 0}, {0, 0, 1, 0}, {554.221374511719, -451.789398193359, -19.2867565155029, 0} }, 0},
{'OB_Others_06', { {1, 0, 0, 0}, {0, 1, 0, 0}, {0, 0, 1, 0}, {190.414993286133, -510.669281005859, -24.4226036071777, 0} }, 0},
{'OB_Others_04', { {1, 0, 0, 0}, {0, 1, 0, 0}, {0, 0, 1, 0}, {217.061553955078, -479.981292724609, -20.1032028198242, 0} }, 0},
{'OB_Dalnice_Asfalt', { {1, 0, 0, 0}, {0, 1, 0, 0}, {0, 0, 1, 0}, {285.661468505859, -552.311889648438, -12.0399141311646, 0} }, 0},
{'OB_Teren_Trava_14', { {1, 0, 0, 0}, {0, 1, 0, 0}, {0, 0, 1, 0}, {353.741516113281, -76.3495483398438, -15.6843538284302, 0} }, 0},
{'OB_Teren_Trava_12', { {1, 0, 0, 0}, {0, 1, 0, 0}, {0, 0, 1, 0}, {241.252593994141, -289.865600585938, -20.3036575317383, 0} }, 0},
{'OB_Teren_Trava_11', { {1, 0, 0, 0}, {0, 1, 0, 0}, {0, 0, 1, 0}, {241.252593994141, -289.865600585938, -20.3036575317383, 0} }, 0},
{'OB_Teren_Trava_01', { {1, 0, 0, 0}, {0, 1, 0, 0}, {0, 0, 1, 0}, {442.654602050781, -231.625244140625, -13.2669038772583, 0} }, 0},
{'OB_Teren_Trava_03', { {1, 0, 0, 0}, {0, 1, 0, 0}, {0, 0, 1, 0}, {484.702178955078, 79.5674362182617, -19.234956741333, 0} }, 0},
{'OB_Teren_Trava_02', { {1, 0, 0, 0}, {0, 1, 0, 0}, {0, 0, 1, 0}, {241.252593994141, -289.865600585938, -20.3036575317383, 0} }, 0},
{'OB_Teren_Trava_05', { {1, 0, 0, 0}, {0, 1, 0, 0}, {0, 0, 1, 0}, {241.252593994141, -289.865600585938, -20.3036575317383, 0} }, 0},
{'OB_Teren_Trava_07', { {1, 0, 0, 0}, {0, 1, 0, 0}, {0, 0, 1, 0}, {315.547088623047, -246.77848815918, -13.1933908462524, 0} }, 0},
{'dalnice_svodidlo', { {1, 0, 0, 0}, {0, 1, 0, 0}, {0, 0, 1, 0}, {545.062438964844, -483.080841064453, -10.5759057998657, 0} }, 0},
{'OB_Dalnice_Podpera_00_G', { {1, 0, 0, 0}, {0, 1, 0, 0}, {0, 0, 1, 0}, {534.171447753906, -482.961853027344, -16.9384689331055, 0} }, 0},
{'OB_Teren_Silnice_08', { {1, 0, 0, 0}, {0, 1, 0, 0}, {0, 0, 1, 0}, {241.252593994141, -289.865600585938, -20.3036575317383, 0} }, 0},
{'OB_Teren_Silnice_09', { {1, 0, 0, 0}, {0, 1, 0, 0}, {0, 0, 1, 0}, {241.252593994141, -289.865600585938, -20.3036575317383, 0} }, 0},
{'OB_Teren_Silnice_05', { {1, 0, 0, 0}, {0, 1, 0, 0}, {0, 0, 1, 0}, {241.252593994141, -289.865600585938, -20.3036575317383, 0} }, 0},
{'OB_Teren_Silnice_06', { {1, 0, 0, 0}, {0, 1, 0, 0}, {0, 0, 1, 0}, {241.252593994141, -289.865600585938, -20.3036575317383, 0} }, 0},
{'OB_Teren_Silnice_00', { {1, 0, 0, 0}, {0, 1, 0, 0}, {0, 0, 1, 0}, {241.252593994141, -289.865600585938, -20.3036575317383, 0} }, 0},
{'OB_Teren_Silnice_03', { {1, 0, 0, 0}, {0, 1, 0, 0}, {0, 0, 1, 0}, {241.252593994141, -289.865600585938, -20.3036575317383, 0} }, 0},
{'OB_Teren_Silnice_19', { {1, 0, 0, 0}, {0, 1, 0, 0}, {0, 0, 1, 0}, {241.252593994141, -289.865600585938, -20.3036575317383, 0} }, 0},
{'OB_Teren_Silnice_18', { {1, 0, 0, 0}, {0, 1, 0, 0}, {0, 0, 1, 0}, {241.252593994141, -289.865600585938, -20.3036575317383, 0} }, 0},
{'OB_Teren_Silnice_17', { {1, 0, 0, 0}, {0, 1, 0, 0}, {0, 0, 1, 0}, {241.252593994141, -289.865600585938, -20.3036575317383, 0} }, 0},
{'OB_Teren_Silnice_16', { {1, 0, 0, 0}, {0, 1, 0, 0}, {0, 0, 1, 0}, {241.252593994141, -289.865600585938, -20.3036575317383, 0} }, 0},
{'OB_Teren_Silnice_15', { {1, 0, 0, 0}, {0, 1, 0, 0}, {0, 0, 1, 0}, {241.252593994141, -289.865600585938, -20.3036575317383, 0} }, 0},
{'OB_Teren_Silnice_14', { {1, 0, 0, 0}, {0, 1, 0, 0}, {0, 0, 1, 0}, {241.252593994141, -289.865600585938, -20.3036575317383, 0} }, 0},
{'OB_Teren_Silnice_13', { {1, 0, 0, 0}, {0, 1, 0, 0}, {0, 0, 1, 0}, {241.252593994141, -289.865600585938, -20.3036575317383, 0} }, 0},
{'OB_Teren_Silnice_11', { {1, 0, 0, 0}, {0, 1, 0, 0}, {0, 0, 1, 0}, {241.252593994141, -289.865600585938, -20.3036575317383, 0} }, 0},
{'OB_Teren_Silnice_20', { {1, 0, 0, 0}, {0, 1, 0, 0}, {0, 0, 1, 0}, {241.252593994141, -289.865600585938, -20.3036575317383, 0} }, 0},
{'OB_Dalnice_Podpera_Others', { {1, 0, 0, 0}, {0, 1, 0, 0}, {0, 0, 1, 0}, {215.293960571289, -527.2431640625, -15.1442184448242, 0} }, 0},

}
print(os.date())
function string.split(input, separator)

	if type(input) ~= "string" then error("type mismatch in argument #1", 3) end
	if (separator and type(separator) ~= "string") then error("type mismatch in argument #2", 3) end

	if not separator then
		separator = "%s"
	end
	local t = {}
	local i = 1
	for str in string.gmatch(input, "([^"..separator.."]+)") do
		t[i] = str
		i = i + 1
	end
	return t
end

local pyt_new = "C:\\test\\default_new.txt"
--[[local pyt = "C:\\default.txt"
local file = io.open(pyt, "r")
local file_new = io.open(pyt_new, "w")
local text = ""

for line in io.lines(pyt) do
	if string.find(line, "Material") then
		file_new:write(text.."\n")
		text = string.split(line, " ")[2]
	end

	if string.find(line, "File") then
		text = text.." "..tostring(string.split(line, " ")[2])
	end
end]]

for k,v in ipairs(object) do
	local pyt = "C:\\"..v[1].."(0).obj.mtl"
	local file = io.open(pyt, "r")
	local text = {}

	for line in io.lines(pyt) do
		table.insert(text, line)
	end

	for k,line in ipairs(text) do
		for p in io.lines(pyt_new) do
			local spl = string.split(tostring(p), " ")
			if line == "map_kd "..tostring(spl[1])..".dds" then
				text[k] = "map_kd "..tostring(spl[2])
				break
			end
		end
	end

	file:close()

	local file = io.open(pyt, "w")
	for i,v in ipairs(text) do
		file:write(v.."\n")
	end

	file:close()
end

local file_meta = io.open("C:\\test\\meta.txt", "w")
for k,v in ipairs(object) do
	local pyt = "C:\\"..v[1].."(0).obj"
	local file = io.open(pyt, "r")
	local text = {}

	for line in io.lines(pyt) do
		table.insert(text, line)
	end

	for k,line in ipairs(text) do
		if line == "g mesh" then
			text[k] = "g "..v[1]
		end
	end

	file:close()

	local file = io.open(pyt, "w")
	for i,v in ipairs(text) do
		file:write(v.."\n")
	end

	file:close()

	file_meta:write("<file src='oysterbay/"..v[1]..".dff'/>\n")
	file_meta:write("<file src='oysterbay/"..v[1]..".col'/>\n")
end

file_meta:close()
print(os.date())
